[{"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\index.js":"1","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\App.js":"2","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\pages\\SavedBooks.js":"3","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\pages\\SearchBooks.js":"4","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\components\\Navbar.js":"5","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\components\\SignupForm.js":"6","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\components\\LoginForm.js":"7","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\utils\\localStorage.js":"8","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\utils\\API.js":"9","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\utils\\auth.js":"10","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\utils\\queries.js":"11"},{"size":278,"mtime":1652997528575,"results":"12","hashOfConfig":"13"},{"size":1000,"mtime":1653837043899,"results":"14","hashOfConfig":"13"},{"size":3499,"mtime":1653835685381,"results":"15","hashOfConfig":"13"},{"size":4810,"mtime":1652997528577,"results":"16","hashOfConfig":"13"},{"size":2601,"mtime":1652997528574,"results":"17","hashOfConfig":"13"},{"size":3378,"mtime":1652997528574,"results":"18","hashOfConfig":"13"},{"size":2709,"mtime":1652997528573,"results":"19","hashOfConfig":"13"},{"size":823,"mtime":1652997528579,"results":"20","hashOfConfig":"13"},{"size":1449,"mtime":1652997528578,"results":"21","hashOfConfig":"13"},{"size":1303,"mtime":1653506417232,"results":"22","hashOfConfig":"13"},{"size":282,"mtime":1653776232783,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"d1d9tk",{"filePath":"27","messages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"29","messages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"26"},{"filePath":"32","messages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"34","messages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"36","messages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"38","messages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\index.js",[],["48","49"],"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\App.js",[],"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\pages\\SavedBooks.js",["50"],"import React, { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { QUERY_ME } from \"../utils/queries\";\r\nimport {\r\n  Jumbotron,\r\n  Container,\r\n  CardColumns,\r\n  Card,\r\n  Button,\r\n} from \"react-bootstrap\";\r\n\r\nimport { getMe, deleteBook } from \"../utils/API\";\r\nimport Auth from \"../utils/auth\";\r\nimport { removeBookId } from \"../utils/localStorage\";\r\n\r\nconst SavedBooks = () => {\r\n  const { loading, data } = useQuery(QUERY_ME);\r\n  const savedBooks = data?.savedBooks || [];\r\n  console.log(savedBooks);\r\n\r\n  const [userData, setUserData] = useState({});\r\n\r\n  // use this to determine if `useEffect()` hook needs to run again\r\n  const userDataLength = Object.keys(userData).length;\r\n\r\n  useEffect(() => {\r\n    const getUserData = async () => {\r\n      try {\r\n        const token = Auth.loggedIn() ? Auth.getToken() : null;\r\n\r\n        if (!token) {\r\n          return false;\r\n        }\r\n\r\n        const response = await getMe(token);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\"something went wrong!\");\r\n        }\r\n\r\n        const user = await response.json();\r\n        setUserData(user);\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    };\r\n\r\n    getUserData();\r\n  }, [userDataLength]);\r\n\r\n  // create function that accepts the book's mongo _id value as param and deletes the book from the database\r\n  const handleDeleteBook = async (bookId) => {\r\n    const token = Auth.loggedIn() ? Auth.getToken() : null;\r\n\r\n    if (!token) {\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const response = await deleteBook(bookId, token);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"something went wrong!\");\r\n      }\r\n\r\n      const updatedUser = await response.json();\r\n      setUserData(updatedUser);\r\n      // upon success, remove book's id from localStorage\r\n      removeBookId(bookId);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  // if data isn't here yet, say so\r\n  if (!userDataLength) {\r\n    return <h2>LOADING...</h2>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Jumbotron fluid className=\"text-light bg-dark\">\r\n        <Container>\r\n          <h1>Viewing saved books!</h1>\r\n        </Container>\r\n      </Jumbotron>\r\n      <Container>\r\n        <h2>\r\n          {userData.savedBooks.length\r\n            ? `Viewing ${userData.savedBooks.length} saved ${\r\n                userData.savedBooks.length === 1 ? \"book\" : \"books\"\r\n              }:`\r\n            : \"You have no saved books!\"}\r\n        </h2>\r\n        <CardColumns>\r\n          {userData.savedBooks.map((book) => {\r\n            return (\r\n              <Card key={book.bookId} border=\"dark\">\r\n                {book.image ? (\r\n                  <Card.Img\r\n                    src={book.image}\r\n                    alt={`The cover for ${book.title}`}\r\n                    variant=\"top\"\r\n                  />\r\n                ) : null}\r\n                <Card.Body>\r\n                  <Card.Title>{book.title}</Card.Title>\r\n                  <p className=\"small\">Authors: {book.authors}</p>\r\n                  <Card.Text>{book.description}</Card.Text>\r\n                  <Button\r\n                    className=\"btn-block btn-danger\"\r\n                    onClick={() => handleDeleteBook(book.bookId)}\r\n                  >\r\n                    Delete this Book!\r\n                  </Button>\r\n                </Card.Body>\r\n              </Card>\r\n            );\r\n          })}\r\n        </CardColumns>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SavedBooks;\r\n","C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\pages\\SearchBooks.js",[],"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\components\\Navbar.js",[],"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\components\\SignupForm.js",[],"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\components\\LoginForm.js",[],"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\utils\\localStorage.js",[],"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\utils\\API.js",[],"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\utils\\auth.js",[],"C:\\Users\\jambr\\OneDrive\\Bootcamp\\Challenges\\search-a-book\\client\\src\\utils\\queries.js",[],{"ruleId":"51","replacedBy":"52"},{"ruleId":"53","replacedBy":"54"},{"ruleId":"55","severity":1,"message":"56","line":17,"column":11,"nodeType":"57","messageId":"58","endLine":17,"endColumn":18},"no-native-reassign",["59"],"no-negated-in-lhs",["60"],"no-unused-vars","'loading' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]